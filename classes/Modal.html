<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>croquis-jsdoc - Modal</title><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="../bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#top-navigation-collapse" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="top-navigation-collapse" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="active"><a href="../classes/index.html">Classes - Modal</a></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private </label></div></div></div></nav><div class="container-fluid content"><div class="row"><div data-spy="affix" class="hidden-xs sidebar col-sm-3"><div class="cormo-sidenav"><div class="panel panel-default"><div id="undefined_body" class="panel-collapse collapse in"><ul class="nav nav-pills nav-stacked"><li class="active"><a href="#Modal">Modal</a></li><li class="cormo-class-property private"><a href="#Modal___cancel">_cancel<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property private"><a href="#Modal___submit">_submit<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property"><a href="#Modal__className">className<span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#Modal__close">close</a></li><li class="cormo-class-property"><a href="#Modal__defaultOptions">defaultOptions</a></li><li class="cormo-class-property"><a href="#Modal__destroy">destroy</a></li><li class="cormo-class-property"><a href="#Modal__events">events</a></li><li class="cormo-class-property"><a href="#Modal__fadeOut">fadeOut</a></li><li class="cormo-class-property"><a href="#Modal__initialize">initialize</a></li><li class="cormo-class-property"><a href="#Modal__message">message</a></li><li class="cormo-class-property"><a href="#Modal__messageAndFade">messageAndFade</a></li><li class="cormo-class-property"><a href="#Modal__render">render</a></li><li><a href="../classes/ModalManager.html">ModalManager</a></li></ul></div></div></div></div><div class="col-sm-9 col-sm-offset-3"><span id="Modal" class="fix-anchor"></span><section><h1 class="class_title">Modal<span class="extends"> extends <span class='missing-link'>Backbone.View</span></span><span class="uses"> uses <a href='../classes/ModalManager.html#ModalManager'>ModalManager</a></span></h1><div></div><div></div><div class="showcode"><button class="btn btn-info">Show class code</button><span> (defined in /src/main.coffee:13)</span></div><pre class="sourcecode prettyprint .linenums:13">class Modal extends Backbone.View</pre><div class="panel panel-info"><div data-toggle="collapse" data-target="#Modal_ctor_body" class="panel-heading collapsed"><h3 class="panel-title">Constructor<span class="pull-right glyphicon"></span></h3></div><div id="Modal_ctor_body" class="panel-collapse collapse"><div class="panel-body"><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table></div></div></div></section><span id="Modal___cancel" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal___cancel_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::_cancel()<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal___cancel_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:150)</span></div><pre class="sourcecode prettyprint .linenums:150">_cancel: (ev) -&gt;
	ev.preventDefault() if ev?

	@trigger 'cancel'
	@close()</pre></div></div></div></section><span id="Modal___submit" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal___submit_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::_submit()<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal___submit_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:139)</span></div><pre class="sourcecode prettyprint .linenums:139">_submit: (ev) -&gt;
	target = $(ev.currentTarget)
	unless target.hasClass 'loader'
		target.addClass 'loader'
		@$('button.cancel').hide()
		@trigger 'submit'</pre></div></div></div></section><span id="Modal__className" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__className_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::className : <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__className_body" class="panel-collapse collapse"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:19)</span></div><pre class="sourcecode prettyprint .linenums:19">className: &quot;hibb-modal&quot;</pre></div></div></div></section><span id="Modal__close" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__close_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::close()<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__close_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:159)</span></div><pre class="sourcecode prettyprint .linenums:159">close: -&gt;
	# Trigger close before removing the modal, otherwise there won't be a trigger!
	@trigger 'close'
	modalManager.remove @</pre></div></div></div></section><span id="Modal__defaultOptions" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__defaultOptions_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::defaultOptions()<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__defaultOptions_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span>Default options.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:25)</span></div><pre class="sourcecode prettyprint .linenums:25">defaultOptions: -&gt;
	title: ''
	titleClass: ''
	cancelAndSubmit: true
	cancelValue: 'Cancel'
	submitValue: 'Submit'
	customClassName: ''
	focusOnFirstInput: true
	clickOverlay: true</pre></div></div></div></section><span id="Modal__destroy" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__destroy_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::destroy()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Alias for close.</p>
</div></div><div id="Modal__destroy_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:169)</span></div><pre class="sourcecode prettyprint .linenums:169">destroy: -&gt; @close()</pre></div></div></div></section><span id="Modal__events" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__events_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::events()<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__events_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span></span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:126)</span></div><pre class="sourcecode prettyprint .linenums:126">events: -&gt;
	&quot;click button.submit&quot;: '_submit'
	&quot;click button.cancel&quot;: &quot;_cancel&quot;
	&quot;click .overlay&quot;: -&gt; @_cancel() if @options.clickOverlay
	&quot;keydown input&quot;: (ev) -&gt;
		if ev.keyCode is 13
			ev.preventDefault()
			@_submit ev</pre></div></div></div></section><span id="Modal__fadeOut" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__fadeOut_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::fadeOut()<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__fadeOut_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:174)</span></div><pre class="sourcecode prettyprint .linenums:174">fadeOut: (delay = 1000) -&gt;
	# Speed is used for $.fadeOut and to calculate the time at which to @remove the modal.
	# Set speed to 0 if delay is 0.
	speed = if delay is 0 then 0 else 500

	# Fade out the modal body (not the overlay!) at given speed.
	@$(&quot;.modalbody&quot;).delay(delay).fadeOut speed
		
	# Use setTimeout to @remove before $.fadeOut is completely finished, otherwise it interferes with the overlay
	setTimeout (=&gt; @close()), delay + speed - 100</pre></div></div></div></section><span id="Modal__initialize" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__initialize_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::initialize([this.options])<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__initialize_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>this.options</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> </span></td></tr><tr><td><span class="method-depth1"></span><code>title=''</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Title of the modal.</span></td></tr><tr><td><span class="method-depth1"></span><code>titleClass=''</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Deprecated by customClassName?</span></td></tr><tr><td><span class="method-depth1"></span><code>width</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Width of the modal in px, %, vw or auto. </span></td></tr><tr><td><span class="method-depth1"></span><code>height</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Height of the modal in px, %, vw or auto.</span></td></tr><tr><td><span class="method-depth1"></span><code>html</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> </span></td></tr><tr><td><span class="method-depth1"></span><code>cancelAndSubmit=true</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'>Boolean</a></span></td><td><span> Show cancel and submit button.</span></td></tr><tr><td><span class="method-depth1"></span><code>cancelValue='Cancel'</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Value for the cancel button.</span></td></tr><tr><td><span class="method-depth1"></span><code>submitValue='Submit'</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Value for the submit button.</span></td></tr><tr><td><span class="method-depth1"></span><code>customClassName=''</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Add a className to top level to support styling and DOM manipulation. </span></td></tr><tr><td><span class="method-depth1"></span><code>focusOnFirstInput=true</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'>Boolean</a></span></td><td><span> Set the focus to the first <input> when the modal is shown.</span></td></tr><tr><td><span class="method-depth1"></span><code>clickOverlay=true</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'>Boolean</a></span></td><td><span> If the overlay is clicked, cancel is triggered. Defaults to true.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:51)</span></div><pre class="sourcecode prettyprint .linenums:51">initialize: (@options={}) -&gt;
	super

	@options = _.extend @defaultOptions(), @options

	# We have to call this option customClassName because @options.className
	# will replace 'modal' as className.
	@$el.addClass @options.customClassName if @options.customClassName.length &gt; 0


	@render()</pre></div></div></div></section><span id="Modal__message" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__message_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::message()<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__message_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:188)</span></div><pre class="sourcecode prettyprint .linenums:188">message: (type, message) -&gt;
	return console.error(&quot;Unknown message type!&quot;)  if [&quot;success&quot;, &quot;warning&quot;, &quot;error&quot;].indexOf(type) is -1
	@$(&quot;p.message&quot;).show()
	@$(&quot;p.message&quot;).html(message).addClass type</pre></div></div></div></section><span id="Modal__messageAndFade" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__messageAndFade_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::messageAndFade(type, message, [delay])<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__messageAndFade_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>type</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> One of success, warning, error</span></td></tr><tr><td><span class="method-depth0"></span><code>message</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> </span></td></tr><tr><td><span class="method-depth0"></span><code>delay</code><span class="pull-right label label-optional">optional</span></td><td><span><span class='missing-link'>Delay</span></span></td><td><span> Time to wait before fading</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:199)</span></div><pre class="sourcecode prettyprint .linenums:199">messageAndFade: (type, message, delay) -&gt;
	@$(&quot;.modalbody .body&quot;).hide()
	@$(&quot;footer&quot;).hide()
	@message type, message
	@fadeOut delay</pre></div></div></div></section><span id="Modal__render" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#Modal__render_body" class="panel-heading collapsed"><h3 class="panel-title">Modal::render()<span class="pull-right glyphicon"></span></h3><div class="method-summary"></div></div><div id="Modal__render_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in /src/main.coffee:67)</span></div><pre class="sourcecode prettyprint .linenums:67">render: -&gt;
	rtpl = tpl @options
	@$el.html rtpl

	body = @$('.body')
	if @options.html? then body.html @options.html else body.hide()

	@$('.body').scroll (ev) =&gt; ev.stopPropagation()

	modalManager.add @

	if @options.width?
		@$('.modalbody').css 'width', @options.width
		marginLeft = (-1 * parseInt(@options.width, 10)/2)
		marginLeft += '%' if @options.width.slice(-1) is '%'
		marginLeft += 'vw' if @options.width.slice(-2) is 'vw'
		marginLeft = @$('.modalbody').width()/-2 if @options.width is 'auto'
		@$('.modalbody').css 'margin-left', marginLeft

	if @options.height?
		@$('.modalbody').css 'height', @options.height

		# unless @options.height is 'auto'
		# 	offsetTop = (-1 * parseInt(@options.height, 10)/2)
		# 	offsetTop += '%' if @options.height.slice(-1) is '%'
		# 	offsetTop += 'vh' if @options.height.slice(-2) is 'vh'
		# 	console.log offsetTop
		# 	@$('.modalbody').css 'margin-top', offsetTop

	# Add scrollTop of &lt;body&gt; to the position of the modal if body is scrolled (otherwise modal might be outside viewport)
	# scrollTop = document.querySelector('body').scrollTop
	# top = (viewportHeight - @$('.modalbody').height())/2
	# @$('.modalbody').css 'top', top + scrollTop if scrollTop &gt; 0

	# offsetTop is calculated based on the .modalbody height, but the height is maxed to the viewportHeight
	# offsetTop = Math.min (@$('.modalbody').height() + 40)/2, (viewportHeight - 400)*0.5

	viewportHeight = document.documentElement.clientHeight

	offsetTop = @$('.modalbody').outerHeight()/2

	# The offsetTop cannot exceed the bodyTop, because it would be
	# outside (on the top) the viewport.
	bodyTop = @$('.modalbody').offset().top
	offsetTop = bodyTop - 20 if offsetTop &gt; bodyTop

	@$('.modalbody').css 'margin-top', -1 * offsetTop
	@$('.modalbody .body').css 'max-height', viewportHeight - 175

	if @options.focusOnFirstInput
		firstInput = @$('input[type=&quot;text&quot;]').first()
		firstInput.focus() if firstInput.length &gt; 0

	@</pre></div></div></div></section></div></div></div><script src="http://code.jquery.com/jquery-1.11.0.min.js"></script><script src="../bootstrap-3.2.0-dist/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script></body></html>